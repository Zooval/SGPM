{% extends 'base.html' %}

{% block title %}SGPM | Clientes{% endblock %}
{% block page_title %}Solicitantes{% endblock %}
{% block page_subtitle %}Gestión de solicitantes {% endblock %}

{% block extra_head %}
    {% load static %}
        <link rel="stylesheet" href="{% static 'css/consulta.css' %}">
{% endblock %}

{% block page_content %}
    <div class="card">
        <div class="card-content">
            <h3>Solicitantes</h3>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">

        <!-- Topbar -->
        <header class="topbar">
            <div class="topbar-title">
                <h2>Consulta de Expediente</h2>
                <p>Busque y visualice expedientes digitales de solicitantes</p>
            </div>
        </header>

        <!-- Content Area -->
        <div class="content-area">

            <!-- Search Section -->
            <div class="search-card">
                <div class="search-header">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <h3>Buscar Expediente</h3>
                </div>
                <form id="searchForm" class="search-form">
                    <div class="search-fields">
                        <div class="search-group">
                            <label class="search-label">
                                <i class="fa-solid fa-hashtag"></i>
                                ID de Expediente
                            </label>
                            <input
                                type="text"
                                class="form-control"
                                id="searchExpediente"
                                placeholder="Ej: EXP-202601-JG1234"
                            />
                        </div>
                        <div class="search-group">
                            <label class="search-label">
                                <i class="fa-solid fa-id-card"></i>
                                Cédula / Documento
                            </label>
                            <input
                                type="text"
                                class="form-control"
                                id="searchCedula"
                                placeholder="Ej: 1234567890"
                            />
                        </div>
                        <div class="search-group">
                            <label class="search-label">
                                <i class="fa-solid fa-user"></i>
                                Nombre o Apellido
                            </label>
                            <input
                                type="text"
                                class="form-control"
                                id="searchNombre"
                                placeholder="Ej: Juan Pérez"
                            />
                        </div>
                        <button type="submit" class="btn-search">
                            <i class="fa-solid fa-search"></i>
                            Buscar
                        </button>
                    </div>
                </form>
            </div>

            <!-- Results Info -->
            <div id="noResults" class="no-results" style="display: none;">
                <i class="fa-solid fa-folder-open"></i>
                <p>No se encontraron expedientes con los criterios de búsqueda</p>
            </div>

            <!-- Expediente Detail Section (Initially Hidden) -->
            <div id="expedienteDetail" class="expediente-detail" style="display: none;">

                <!-- Status Banner -->
                <div class="status-banner">
                    <div class="status-banner-content">
                        <div class="status-info">
                            <span class="status-label">Estado del Proceso:</span>
                            <span class="status-badge" id="estadoBadge">En Proceso</span>
                        </div>
                        <div class="expediente-id">
                            <i class="fa-solid fa-barcode"></i>
                            <span id="expedienteIdDisplay">EXP-202601-JG1234</span>
                        </div>
                    </div>
                    <div class="status-actions">
                        <button class="action-icon-btn" title="Imprimir expediente">
                            <i class="fa-solid fa-print"></i>
                        </button>
                        <button class="action-icon-btn" title="Descargar PDF">
                            <i class="fa-solid fa-file-pdf"></i>
                        </button>
                        <button class="action-icon-btn" title="Editar expediente">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </button>
                    </div>
                </div>

                <!-- Main Grid -->
                <div class="expediente-grid">

                    <!-- Left Column -->
                    <div class="expediente-column">

                        <!-- Personal Info Card -->
                        <div class="info-card">
                            <div class="info-card-header">
                                <i class="fa-solid fa-user-circle"></i>
                                <h4>Información Personal</h4>
                            </div>
                            <div class="info-card-body">
                                <div class="info-row">
                                    <span class="info-label">Nombre Completo:</span>
                                    <span class="info-value" id="nombreCompleto">-</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Cédula/Documento:</span>
                                    <span class="info-value" id="cedula">-</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Fecha de Nacimiento:</span>
                                    <span class="info-value" id="fechaNacimiento">-</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Edad:</span>
                                    <span class="info-value" id="edad">-</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Género:</span>
                                    <span class="info-value" id="genero">-</span>
                                </div>
                            </div>
                        </div>

                        <!-- Contact Info Card -->
                        <div class="info-card">
                            <div class="info-card-header">
                                <i class="fa-solid fa-address-book"></i>
                                <h4>Datos de Contacto</h4>
                            </div>
                            <div class="info-card-body">
                                <div class="info-row">
                                    <span class="info-label">Correo Electrónico:</span>
                                    <span class="info-value" id="correo">-</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Teléfono:</span>
                                    <span class="info-value" id="telefono">-</span>
                                </div>
                            </div>
                        </div>

                        <!-- Migration Info Card -->
                        <div class="info-card">
                            <div class="info-card-header">
                                <i class="fa-solid fa-earth-americas"></i>
                                <h4>Información Migratoria</h4>
                            </div>
                            <div class="info-card-body">
                                <div class="info-row">
                                    <span class="info-label">País de Origen:</span>
                                    <span class="info-value" id="paisOrigen">-</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">País de Destino:</span>
                                    <span class="info-value" id="paisDestino">-</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Tipo de Servicio:</span>
                                    <span class="info-value" id="tipoServicio">-</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Duración Estimada:</span>
                                    <span class="info-value" id="duracion">-</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Urgencia:</span>
                                    <span class="info-value" id="urgencia">-</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="expediente-column">

                        <!-- Process Timeline Card -->
                        <div class="info-card">
                            <div class="info-card-header">
                                <i class="fa-solid fa-clock-rotate-left"></i>
                                <h4>Estado del Proceso</h4>
                            </div>
                            <div class="info-card-body">
                                <div class="progress-container">
                                    <div class="progress-bar-custom">
                                        <div class="progress-fill" id="progressBar" style="width: 40%"></div>
                                    </div>
                                    <span class="progress-text" id="progressText">40% Completado</span>
                                </div>

                                <div class="timeline">
                                    <div class="timeline-item completed">
                                        <div class="timeline-marker">
                                            <i class="fa-solid fa-check"></i>
                                        </div>
                                        <div class="timeline-content">
                                            <h5>Registro Inicial</h5>
                                            <p class="timeline-date">28 Ene 2026, 10:30 AM</p>
                                            <p class="timeline-desc">Expediente creado y validado</p>
                                        </div>
                                    </div>

                                    <div class="timeline-item completed">
                                        <div class="timeline-marker">
                                            <i class="fa-solid fa-check"></i>
                                        </div>
                                        <div class="timeline-content">
                                            <h5>Documentación Recibida</h5>
                                            <p class="timeline-date">29 Ene 2026, 02:15 PM</p>
                                            <p class="timeline-desc">Documentos cargados y verificados</p>
                                        </div>
                                    </div>

                                    <div class="timeline-item active">
                                        <div class="timeline-marker">
                                            <i class="fa-solid fa-spinner"></i>
                                        </div>
                                        <div class="timeline-content">
                                            <h5>Revisión de Caso</h5>
                                            <p class="timeline-date">En proceso</p>
                                            <p class="timeline-desc">Análisis de elegibilidad en curso</p>
                                        </div>
                                    </div>

                                    <div class="timeline-item pending">
                                        <div class="timeline-marker">
                                            <i class="fa-solid fa-circle"></i>
                                        </div>
                                        <div class="timeline-content">
                                            <h5>Entrevista Programada</h5>
                                            <p class="timeline-date">Pendiente</p>
                                            <p class="timeline-desc">Fecha por confirmar</p>
                                        </div>
                                    </div>

                                    <div class="timeline-item pending">
                                        <div class="timeline-marker">
                                            <i class="fa-solid fa-circle"></i>
                                        </div>
                                        <div class="timeline-content">
                                            <h5>Resolución Final</h5>
                                            <p class="timeline-date">Pendiente</p>
                                            <p class="timeline-desc">Decisión sobre el caso</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Key Dates Card -->
                        <div class="info-card">
                            <div class="info-card-header">
                                <i class="fa-solid fa-calendar-days"></i>
                                <h4>Fechas Clave</h4>
                            </div>
                            <div class="info-card-body">
                                <div class="date-item">
                                    <div class="date-icon blue">
                                        <i class="fa-solid fa-calendar-plus"></i>
                                    </div>
                                    <div class="date-info">
                                        <span class="date-label">Fecha de Registro</span>
                                        <span class="date-value" id="fechaRegistro">28/01/2026</span>
                                    </div>
                                </div>
                                <div class="date-item">
                                    <div class="date-icon green">
                                        <i class="fa-solid fa-calendar-check"></i>
                                    </div>
                                    <div class="date-info">
                                        <span class="date-label">Última Actualización</span>
                                        <span class="date-value" id="fechaActualizacion">29/01/2026</span>
                                    </div>
                                </div>
                                <div class="date-item">
                                    <div class="date-icon orange">
                                        <i class="fa-solid fa-plane-departure"></i>
                                    </div>
                                    <div class="date-info">
                                        <span class="date-label">Fecha Deseada de Viaje</span>
                                        <span class="date-value" id="fechaViaje">15/03/2026</span>
                                    </div>
                                </div>
                                <div class="date-item">
                                    <div class="date-icon purple">
                                        <i class="fa-solid fa-hourglass-half"></i>
                                    </div>
                                    <div class="date-info">
                                        <span class="date-label">Tiempo Transcurrido</span>
                                        <span class="date-value" id="tiempoTranscurrido">1 día</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Appointments Card -->
                        <div class="info-card">
                            <div class="info-card-header">
                                <i class="fa-solid fa-calendar-days"></i>
                                <h4>Citas Programadas</h4>
                            </div>
                            <div class="info-card-body">
                                <div class="appointment-item">
                                    <div class="appointment-date">
                                        <span class="apt-day">05</span>
                                        <span class="apt-month">FEB</span>
                                    </div>
                                    <div class="appointment-info">
                                        <h5>Entrega de Documentos</h5>
                                        <p><i class="fa-solid fa-clock"></i> 10:00 AM - 11:00 AM</p>
                                        <p><i class="fa-solid fa-location-dot"></i> Oficina Central</p>
                                    </div>
                                    <div class="appointment-status upcoming">
                                        <i class="fa-solid fa-circle"></i>
                                        Próxima
                                    </div>
                                </div>

                                <div class="appointment-item">
                                    <div class="appointment-date">
                                        <span class="apt-day">15</span>
                                        <span class="apt-month">FEB</span>
                                    </div>
                                    <div class="appointment-info">
                                        <h5>Entrevista Personal</h5>
                                        <p><i class="fa-solid fa-clock"></i> 02:00 PM - 03:00 PM</p>
                                        <p><i class="fa-solid fa-location-dot"></i> Oficina Central</p>
                                    </div>
                                    <div class="appointment-status scheduled">
                                        <i class="fa-solid fa-circle"></i>
                                        Agendada
                                    </div>
                                </div>

                                <div class="no-appointments" style="display: none;">
                                    <i class="fa-regular fa-calendar"></i>
                                    <p>No hay citas programadas</p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- Event History Section -->
                <div class="history-section">
                    <div class="history-header">
                        <i class="fa-solid fa-list-check"></i>
                        <h4>Historial de Eventos</h4>
                    </div>
                    <div class="history-table-container">
                        <table class="history-table">
                            <thead>
                                <tr>
                                    <th>Fecha y Hora</th>
                                    <th>Evento</th>
                                    <th>Descripción</th>
                                    <th>Usuario</th>
                                    <th>Estado</th>
                                </tr>
                            </thead>
                            <tbody id="historyTableBody">
                                <tr>
                                    <td>29/01/2026 14:15</td>
                                    <td><i class="fa-solid fa-file-arrow-up"></i> Documentos Cargados</td>
                                    <td>Se cargaron documentos de identidad y comprobantes</td>
                                    <td>admin</td>
                                    <td><span class="event-badge success">Completado</span></td>
                                </tr>
                                <tr>
                                    <td>28/01/2026 10:30</td>
                                    <td><i class="fa-solid fa-user-plus"></i> Registro Inicial</td>
                                    <td>Expediente creado en el sistema</td>
                                    <td>admin</td>
                                    <td><span class="event-badge success">Completado</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>

        </div>
    </main>

{% endblock %}