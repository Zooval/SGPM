{% extends 'base.html' %}

{% block title %}SGPM | Clientes{% endblock %}
{% block page_title %}Solicitantes{% endblock %}
{% block page_subtitle %}Gestión de solicitantes {% endblock %}

{% block extra_head %}
    {% load static %}
        <link rel="stylesheet" href="{% static 'css/formulario.css' %}">
{% endblock %}

{% block page_content %}

    <!-- Main Content -->
    <main class="main-content">

        <!-- Topbar -->
        <header class="topbar">
            <div class="topbar-title">
                <h2>Registro de Solicitante</h2>
                <p>Complete el formulario con los datos del solicitante</p>
            </div>
            <div class="topbar-actions">
                <a href="{% url 'solicitante' %}" class="btn-secondary {% if request.resolver_match.url_name == 'solicitante' %}active{% endif %}">
                    <i class="fa-solid fa-arrow-left"></i>
                    Volver al Inicio
                </a>
            </div>
        </header>

        <!-- Content Area -->
        <div class="content-area">

            <!-- Form Card -->
            <div class="form-card">
                <div class="form-card-header">
                    <div class="form-card-icon">
                        <i class="fa-solid fa-user-plus"></i>
                    </div>
                    <div>
                        <h3>Nuevo Solicitante</h3>
                        <p>Ingrese la información personal y migratoria del solicitante</p>
                    </div>
                </div>

                <form id="registroForm" class="registro-form" method="post">
                    {% csrf_token %}

                    <!-- Sección: Datos Personales -->
                    <div class="form-section">
                        <div class="section-header">
                            <i class="fa-solid fa-address-card"></i>
                            <h4>Datos Personales</h4>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-id-card"></i>
                                    Cédula / Documento de Identidad *
                                </label>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="cedula"
                                    name="cedula"
                                    placeholder="Ej: 1234567890"
                                    value="{{ form_data.cedula|default:'' }}"
                                    required
                                />
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-user"></i>
                                    Nombres *
                                </label>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="nombres"
                                    name="nombres"
                                    placeholder="Ej: Juan Carlos"
                                    value="{{ form_data.nombres|default:'' }}"
                                    required
                                />
                            </div>

                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-user"></i>
                                    Apellidos *
                                </label>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="apellidos"
                                    name="apellidos"
                                    placeholder="Ej: Pérez González"
                                    value="{{ form_data.apellidos|default:'' }}"
                                    required
                                />
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-envelope"></i>
                                    Correo Electrónico *
                                </label>
                                <input
                                    type="email"
                                    class="form-control"
                                    id="correo"
                                    name="correo"
                                    placeholder="Ej: solicitante@email.com"
                                    value="{{ form_data.correo|default:'' }}"
                                    required
                                />
                            </div>

                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-phone"></i>
                                    Teléfono *
                                </label>
                                <input
                                    type="tel"
                                    class="form-control"
                                    id="telefono"
                                    name="telefono"
                                    placeholder="Ej: +593 999999999"
                                    value="{{ form_data.telefono|default:'' }}"
                                    required
                                />
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-calendar-days"></i>
                                    Fecha de Nacimiento *
                                </label>
                                <input
                                    type="date"
                                    class="form-control"
                                    id="fecha_nacimiento"
                                    name="fecha_nacimiento"
                                    value="{{ form_data.fecha_nacimiento|default:'' }}"
                                    required
                                />
                            </div>

                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-venus-mars"></i>
                                    Género
                                </label>
                                <select class="form-control" id="genero" name="genero">
                                    <option value="">Seleccione...</option>
                                    <option value="M">Masculino</option>
                                    <option value="F">Femenino</option>
                                    <option value="O">Otro</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Sección: Información Migratoria -->
                    <div class="form-section">
                        <div class="section-header">
                            <i class="fa-solid fa-earth-americas"></i>
                            <h4>Información Migratoria</h4>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-flag"></i>
                                    País de Origen
                                </label>
                                <select class="form-control" id="paisOrigen" name="paisOrigen">
                                    <option value="">Seleccione un país...</option>
                                    <option value="EC">Ecuador</option>
                                    <option value="CO">Colombia</option>
                                    <option value="PE">Perú</option>
                                    <option value="VE">Venezuela</option>
                                    <option value="US">Estados Unidos</option>
                                    <option value="ES">España</option>
                                    <!-- Agregar más países según necesidad -->
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-map-location-dot"></i>
                                    País de Destino *
                                </label>
                                <select class="form-control" id="paisDestino" name="paisDestino" required>
                                    <option value="">Seleccione un país...</option>
                                    <option value="US">Estados Unidos</option>
                                    <option value="CA">Canadá</option>
                                    <option value="ES">España</option>
                                    <option value="UK">Reino Unido</option>
                                    <option value="AU">Australia</option>
                                    <option value="DE">Alemania</option>
                                    <option value="FR">Francia</option>
                                    <option value="IT">Italia</option>
                                    <!-- Agregar más países según necesidad -->
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-passport"></i>
                                    Tipo de Servicio / Visa *
                                </label>
                                <select class="form-control" id="tipoServicio" name="tipoServicio" required>
                                    <option value="">Seleccione el tipo de servicio...</option>
                                    <option value="TURISTA">Visa de Turista</option>
                                    <option value="TRABAJO">Visa de Trabajo</option>
                                    <option value="ESTUDIANTE">Visa de Estudiante</option>
                                    <option value="RESIDENCIA">Residencia Permanente</option>
                                    <option value="FAMILIAR">Reunificación Familiar</option>
                                    <option value="REFUGIO">Solicitud de Refugio</option>
                                    <option value="TRANSITO">Visa de Tránsito</option>
                                    <option value="NEGOCIOS">Visa de Negocios</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-clock"></i>
                                    Duración Estimada
                                </label>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="duracionEstimada"
                                    name="duracionEstimada"
                                    placeholder="Ej: 6 meses, 1 año"
                                />
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-calendar-check"></i>
                                    Fecha Deseada de Viaje
                                </label>
                                <input
                                    type="date"
                                    class="form-control"
                                    id="fechaViajeDeseada"
                                    name="fechaViajeDeseada"
                                />
                            </div>

                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fa-solid fa-circle-exclamation"></i>
                                    Urgencia del Trámite
                                </label>
                                <select class="form-control" id="urgencia" name="urgencia">
                                    <option value="NORMAL">Normal</option>
                                    <option value="MEDIA">Media</option>
                                    <option value="ALTA">Alta</option>
                                    <option value="URGENTE">Urgente</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Sección: Información Adicional -->
                    <div class="form-section">
                        <div class="section-header">
                            <i class="fa-solid fa-circle-info"></i>
                            <h4>Información Adicional</h4>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label class="form-label">
                                    <i class="fa-solid fa-comment"></i>
                                    Observaciones / Notas
                                </label>
                                <textarea
                                    class="form-control"
                                    id="observaciones"
                                    name="observaciones"
                                    rows="4"
                                    placeholder="Ingrese información adicional relevante sobre el caso del solicitante..."
                                ></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Alert de validación -->
                    <div id="validationAlert" class="error-alert" style="display: none;">
                        <i class="fa-solid fa-triangle-exclamation"></i>
                        <span id="validationMessage"></span>
                    </div>

                    <!-- Alert de éxito -->
                    <div id="successAlert" class="success-alert" style="display: none;">
                        <i class="fa-solid fa-circle-check"></i>
                        <span id="successMessage"></span>
                    </div>

                    <!-- Botones de Acción -->
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="window.history.back()">
                            <i class="fa-solid fa-arrow-left"></i>
                            Cancelar
                        </button>
                        <button type="submit" class="btn-primary">
                            <i class="fa-solid fa-floppy-disk"></i>
                            Registrar Solicitante
                            <span class="arrow">→</span>
                        </button>
                    </div>

                </form>
            </div>

        </div>
    </main>

{% endblock %}